,max.q = 5
,FullSearch = F)
summary(model.1_train)
df.lags <- data.frame(quant_imov_itbi=model.1_train$q,model.1_train$p)+1
model.lag <- ardlBound(g1, data = train,
ic = c("AIC"),
p = df.lags,
stability = T
)
#**************************************************************************
#                             3 APPLY ARDL
#**************************************************************************
library(ARDL)
model.lag_train = ardlDlm(g1, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
)
summary(model.lag_train) # MAPE = 1.873197 | Adjusted R-squared:  0.9441 | p-value: 0.00001612
remove <- list(p=list(ibc_br= c(1,2,3)
,prazo_med_operac_cred_meses = c(0,3)
,conce_tot_tot = c(2,3)
,credit_pf_imob = c(0,2)
,estoque = c(1,2,3)
,lancamentos_alvaras = c(0,1,2)
))
model.lag_train = ardlDlm(g1, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train) # MAPE = 2.445372  | Adjusted R-squared:  0.9122 | p-value: 0.0000000000115
col = c("quant_imov_itbi"
,"ibc_br"
,"prazo_med_operac_cred_meses"
,"conce_tot_tot"
,"credit_pf_imob"
,"estoque"
,"lancamentos_alvaras"
,"mes_01","mes_02","mes_03","mes_04","mes_05"
,"mes_06","mes_07","mes_08","mes_09","mes_10"
,"mes_11"
)
temp = temp_aux[,col]
temp$ibc_br <- log(temp$ibc_br)
temp$prazo_med_operac_cred_meses <- log(temp$prazo_med_operac_cred_meses)
temp$conce_tot_tot <- log(temp$conce_tot_tot)
temp$credit_pf_imob <- log(temp$credit_pf_imob)
temp$estoque <- log(temp$estoque )
temp$lancamentos_alvaras <- log(temp$lancamentos_alvaras)
temp$quant_imov_itbi <- log(temp$quant_imov_itbi)
train = temp[1:44,]
test = temp[45:56,]
max.p <- max(df.lags[,2:ncol(df.lags)])-1
min.p <- 1
remove <- list(p=list(ibc_br= c(1,2,3)
,prazo_med_operac_cred_meses = c(0,3)
,conce_tot_tot = c(2,3)
,credit_pf_imob = c(0,2)
,estoque = c(1,2,3)
,lancamentos_alvaras = c(0,1,2)
,mes_01=seq(min.p:max.p)
,mes_02=seq(min.p:max.p)
,mes_03=seq(min.p:max.p)
,mes_04=seq(min.p:max.p)
,mes_05=seq(min.p:max.p)
,mes_06=seq(min.p:max.p)
,mes_07=seq(min.p:max.p)
,mes_08=seq(min.p:max.p)
,mes_09=seq(min.p:max.p)
,mes_10=seq(min.p:max.p)
,mes_11=seq(min.p:max.p)
))
g2 <- (quant_imov_itbi~ibc_br
+prazo_med_operac_cred_meses
+conce_tot_tot
+credit_pf_imob
+estoque
+lancamentos_alvaras
+ mes_01 + mes_02 + mes_03 +mes_04 + mes_05 + mes_06
+ mes_07 + mes_08 + mes_09 + mes_10 + mes_11
)
model.lag_train = ardlDlm(g2, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train) # MAPE = 1.125032 | Adjusted R-squared:  0.9157 | p-value: 0.000001831
#**************************************************************************
#                   4 OUT-OF-SAMPLE  MODEL EVALUATION
#**************************************************************************
#Fallow the pdf strategy  + 'Script_formula_parametrica_mod_multivar_ARDL'
x.test.transp <- t(as.matrix(test[col[2:length(col)]]))
step.ahead <- dim(test)[1]
gc()
options(scipen=999)
model.fct <- dLagM::forecast(model = model.lag_train
,x = x.test.transp
,h = step.ahead
,interval = TRUE
,level = 0.95
,nSim = 500)
model.fct
y.fct_ <- as.data.frame(model.fct$forecasts) %>% dplyr::select(Forecast)
y.fct_ <- ts(y.fct_, frequency = 12, start = c(2022,09))
y.test <- ts(test['quant_imov_itbi'], frequency = 12, start = c(2022,09))
accuracy(y.fct_, y.test)
#**************************************************************************
#                             5 POST-REGRESSION
#**************************************************************************
#Fallow the pdf strategy
model.accurancy_train <- GoF(model.lag_train);model.accurancy_train
#*#**************************************************************************
#                             6 GENERALIZE THE MODEL
#**************************************************************************
#Fallow the pdf strategy
# In this step, you have to run the best model (best MAPE and GoF conditions)
# using all sample (best.model).
#*#**************************************************************************
#                             7 FORECAST h-steps ahead
#**************************************************************************
#Fallow the pdf strategy
test_ahead = temp[45:56,]
test_ahead$quant_imov_itbi = NA
test_ahead$ibc_br = NA
test_ahead$prazo_med_operac_cred_meses= NA
test_ahead$conce_tot_tot = NA
test_ahead$credit_pf_imob = NA
test_ahead$estoque = NA
test_ahead$lancamentos_alvaras = NA
temp_ahead = rbind(temp,test_ahead)
for (i in c( (nrow(temp_ahead)-11):nrow(temp_ahead) ) ) {
temp_ahead[i,'quant_imov_itbi'] = mean(temp_ahead[c(i-3,i-2,i-1),'quant_imov_itbi'][[1]])
temp_ahead[i,'ibc_br'] = mean(temp_ahead[c(i-3,i-2,i-1),'ibc_br'][[1]])
temp_ahead[i,'prazo_med_operac_cred_meses'] = mean(temp_ahead[c(i-3,i-2,i-1),'prazo_med_operac_cred_meses'][[1]])
temp_ahead[i,'conce_tot_tot'] = mean(temp_ahead[c(i-3,i-2,i-1),'conce_tot_tot'][[1]])
temp_ahead[i,'credit_pf_imob'] = mean(temp_ahead[c(i-3,i-2,i-1),'credit_pf_imob'][[1]])
temp_ahead[i,'estoque'] = mean(temp_ahead[c(i-3,i-2,i-1),'estoque'][[1]])
temp_ahead[i,'lancamentos_alvaras'] = mean(temp_ahead[c(i-3,i-2,i-1),'lancamentos_alvaras'][[1]])
}
temp_ahead <- temp_ahead[complete.cases(temp_ahead),]
test_ahead = temp_ahead[c( (nrow(temp_ahead)-11):nrow(temp_ahead) ),]
model.lag_train = ardlDlm(g2, data = temp
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train)
x.transp <- t(as.matrix(test_ahead[2:ncol(test_ahead)]))
step.ahead <- dim(test_ahead)[1]
gc()
best.model.fct <- forecast(model = model.lag_train
,x = x.transp
,h = step.ahead
,interval = TRUE
,level = 0.95
,nSim = 500)
best.model.fct
df = df_demanda[,c("Mes_Ano","quant_imov_itbi")]
df$quant_imov_itbi = log(df$quant_imov_itbi)
df$LB95 = NA
df$UB95 = NA
best.model.fct$forecasts$Mes_Ano = NA
names(best.model.fct$forecasts) = c('LB95','quant_imov_itbi','UB95','Mes_Ano')
df = rbind(df,best.model.fct$forecasts[,c('Mes_Ano','quant_imov_itbi','LB95','UB95')])
df$Mes_Ano = seq(as.Date("2019/01/01"), by = "month", length.out = nrow(df))
# for (i in c(1:nrow(df)) ) {
#   if (i!=nrow(df)) {
#     df$tx_itbi[i+1] = df$quant_imov_itbi[i+1]/df$quant_imov_itbi[i]-1
#   }
# }
fig <- plot_ly(x = df$Mes_Ano, y = df$LB95, type = 'scatter', mode = 'lines',
line = list(color = 'transparent'),
showlegend = FALSE, name = 'Mínimo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$UB95, type = 'scatter', mode = 'lines',
fill = 'tonexty', fillcolor='rgba(0,100,80,0.2)', line = list(color = 'transparent'),
showlegend = FALSE, name = 'Máximo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$quant_imov_itbi, type = 'scatter', mode = 'lines',
line = list(color='rgb(0,100,80)'),
name = 'Médio')
fig <- fig %>% layout(title = "Demanda de Imóveis em São Paulo (+12 meses) <sub>modelo adaptativo</sub>",
paper_bgcolor='rgb(255,255,255)', plot_bgcolor='rgb(229,229,229)',
xaxis = list(title = "Ano Mês<br><sup>Fonte: RBA</sup>",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE),
yaxis = list(title = "",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE))
fig
saveWidget(fig, file = "~/GitHub/Dashes/demanda_imv_mod2_log.html")
df$quant_imov_itbi = exp(df$quant_imov_itbi)
df$LB95 = exp(df$LB95)
df$UB95 = exp(df$UB95)
fig <- plot_ly(x = df$Mes_Ano, y = df$LB95, type = 'scatter', mode = 'lines',
line = list(color = 'transparent'),
showlegend = FALSE, name = 'Mínimo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$UB95, type = 'scatter', mode = 'lines',
fill = 'tonexty', fillcolor='rgba(0,100,80,0.2)', line = list(color = 'transparent'),
showlegend = FALSE, name = 'Máximo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$quant_imov_itbi, type = 'scatter', mode = 'lines',
line = list(color='rgb(0,100,80)'),
name = 'Médio')
fig <- fig %>% layout(title = "Demanda de Imóveis em São Paulo (+12 meses) <sub>modelo adaptativo</sub>",
paper_bgcolor='rgb(255,255,255)', plot_bgcolor='rgb(229,229,229)',
xaxis = list(title = "Ano Mês<br><sup>Fonte: RBA</sup>",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE),
yaxis = list(title = "",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE))
fig
saveWidget(fig, file = "~/GitHub/Dashes/demanda_imv_mod2.html")
# misto ----------------------------------------------------------------
#**************************************************************************
#                             2 LAGS SELECTION
#**************************************************************************
# STRATEGY 1. VARSELECTION
temp_aux = df_demanda
col = c("quant_imov_itbi"
,"ibc_br"
,"indice_expectativa_construcao"
,"indice_expectativa_confianca_consumidor"
,"tx_juros_med_swap_pre_di_prazo_360_dia"
,"juros_imob_pf_tot_12meses"
,"credit_pf_imob"
,"pib_t_mais_1"
,"massa_sp_mes_calc"
,"lancamentos_alvaras"
)
temp = temp_aux[,col]
temp$ibc_br <- log(temp$ibc_br)
temp$credit_pf_imob <- log(temp$credit_pf_imob)
temp$lancamentos_alvaras <- log(temp$lancamentos_alvaras)
temp$indice_expectativa_construcao <- log(temp$indice_expectativa_construcao)
temp$indice_expectativa_confianca_consumidor <- log(temp$indice_expectativa_confianca_consumidor)
temp$massa_sp_mes_calc <- log(temp$massa_sp_mes_calc)
temp$quant_imov_itbi <- log(temp$quant_imov_itbi)
train = temp[1:44,]
test = temp[45:56,]
VARselect(train)
# STRATEGY 2. AUTO_ARDL
library(ARDL)
g1 <-   (quant_imov_itbi~ibc_br
+indice_expectativa_construcao
+indice_expectativa_confianca_consumidor
+tx_juros_med_swap_pre_di_prazo_360_dia
+juros_imob_pf_tot_12meses
+credit_pf_imob
+pib_t_mais_1
+massa_sp_mes_calc
+lancamentos_alvaras)
model.1_train <- ardlBoundOrders(g1, data = train
,ic = "AIC"
,max.p = 4
,max.q = 4
,FullSearch = F)
summary(model.1_train)
df.lags <- data.frame(quant_imov_itbi=model.1_train$q,model.1_train$p)+1
model.lag <- ardlBound(g1, data = train,
ic = c("AIC"),
p = df.lags,
stability = T
)
#**************************************************************************
#                             3 APPLY ARDL
#**************************************************************************
library(ARDL)
model.lag_train = ardlDlm(g1, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
)
summary(model.lag_train) # MAPE = 1.379408 | Adjusted R-squared:  0.9387 | p-value: 0.0000002787
remove <- list(p=list(indice_expectativa_construcao = c(0,2)
,indice_expectativa_confianca_consumidor = c(1,2)
,tx_juros_med_swap_pre_di_prazo_360_dia = c(1)
,juros_imob_pf_tot_12meses = c(1,2)
,credit_pf_imob = c(1)
,pib_t_mais_1 = c(1)
,massa_sp_mes_calc = c(2)
,lancamentos_alvaras = c(0,2)
))
model.lag_train = ardlDlm(g1, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train) # MAPE = 2.143605 | Adjusted R-squared:  0.9372 | p-value: 0.0000000000003801
col = c("quant_imov_itbi"
,"ibc_br"
,"indice_expectativa_construcao"
,"indice_expectativa_confianca_consumidor"
,"tx_juros_med_swap_pre_di_prazo_360_dia"
,"juros_imob_pf_tot_12meses"
,"credit_pf_imob"
,"pib_t_mais_1"
,"massa_sp_mes_calc"
,"lancamentos_alvaras"
,"mes_01","mes_02","mes_03","mes_04","mes_05"
,"mes_06","mes_07","mes_08","mes_09","mes_10"
,"mes_11"
)
temp = temp_aux[,col]
temp$ibc_br <- log(temp$ibc_br)
temp$credit_pf_imob <- log(temp$credit_pf_imob)
temp$lancamentos_alvaras <- log(temp$lancamentos_alvaras)
temp$indice_expectativa_construcao <- log(temp$indice_expectativa_construcao)
temp$indice_expectativa_confianca_consumidor <- log(temp$indice_expectativa_confianca_consumidor)
temp$massa_sp_mes_calc <- log(temp$massa_sp_mes_calc)
temp$quant_imov_itbi <- log(temp$quant_imov_itbi)
train = temp[1:44,]
test = temp[45:56,]
max.p <- max(df.lags[,2:ncol(df.lags)])-1
min.p <- 1
remove <- list(p=list(indice_expectativa_construcao = c(0,2)
,indice_expectativa_confianca_consumidor = c(1,2)
,tx_juros_med_swap_pre_di_prazo_360_dia = c(1)
,juros_imob_pf_tot_12meses = c(1,2)
,credit_pf_imob = c(1)
,pib_t_mais_1 = c(1)
,massa_sp_mes_calc = c(2)
,lancamentos_alvaras = c(0,2)
,mes_01=seq(min.p:max.p)
,mes_02=seq(min.p:max.p)
,mes_03=seq(min.p:max.p)
,mes_04=seq(min.p:max.p)
,mes_05=seq(min.p:max.p)
,mes_06=seq(min.p:max.p)
,mes_07=seq(min.p:max.p)
,mes_08=seq(min.p:max.p)
,mes_09=seq(min.p:max.p)
,mes_10=seq(min.p:max.p)
,mes_11=seq(min.p:max.p)
))
g2 <- (quant_imov_itbi~ibc_br
+indice_expectativa_construcao
+indice_expectativa_confianca_consumidor
+tx_juros_med_swap_pre_di_prazo_360_dia
+juros_imob_pf_tot_12meses
+credit_pf_imob
+pib_t_mais_1
+massa_sp_mes_calc
+lancamentos_alvaras
+ mes_01 + mes_02 + mes_03 +mes_04 + mes_05 + mes_06
+ mes_07 + mes_08 + mes_09 + mes_10 + mes_11
)
model.lag_train = ardlDlm(g2, data = train
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train) # MAPE = 1.764299 | Adjusted R-squared:  0.9845 | p-value: 0.000000000006786
#**************************************************************************
#                   4 OUT-OF-SAMPLE  MODEL EVALUATION
#**************************************************************************
#Fallow the pdf strategy  + 'Script_formula_parametrica_mod_multivar_ARDL'
x.test.transp <- t(as.matrix(test[col[2:length(col)]]))
step.ahead <- dim(test)[1]
gc()
options(scipen=999)
model.fct <- dLagM::forecast(model = model.lag_train
,x = x.test.transp
,h = step.ahead
,interval = TRUE
,level = 0.95
,nSim = 500)
model.fct
y.fct_ <- as.data.frame(model.fct$forecasts) %>% dplyr::select(Forecast)
y.fct_ <- ts(y.fct_, frequency = 12, start = c(2022,09))
y.test <- ts(test['quant_imov_itbi'], frequency = 12, start = c(2022,09))
accuracy(y.fct_, y.test)
#**************************************************************************
#                             5 POST-REGRESSION
#**************************************************************************
#Fallow the pdf strategy
model.accurancy_train <- GoF(model.lag_train);model.accurancy_train
#*#**************************************************************************
#                             6 GENERALIZE THE MODEL
#**************************************************************************
#Fallow the pdf strategy
# In this step, you have to run the best model (best MAPE and GoF conditions)
# using all sample (best.model).
#*#**************************************************************************
#                             7 FORECAST h-steps ahead
#**************************************************************************
#Fallow the pdf strategy
test_ahead = temp[45:56,]
test_ahead$quant_imov_itbi = NA
test_ahead$ibc_br = NA
test_ahead$juros_imob_pf_tot_12meses = NA
test_ahead$credit_pf_imob = NA
test_ahead$massa_sp_mes_calc = NA
test_ahead$lancamentos_alvaras = NA
temp_ahead = rbind(temp,test_ahead)
for (i in c( (nrow(temp_ahead)-11):nrow(temp_ahead) ) ) {
temp_ahead[i,'quant_imov_itbi'] = mean(temp_ahead[c(i-3,i-2,i-1),'quant_imov_itbi'][[1]])
temp_ahead[i,'ibc_br'] = mean(temp_ahead[c(i-3,i-2,i-1),'ibc_br'][[1]])
temp_ahead[i,'juros_imob_pf_tot_12meses'] = mean(temp_ahead[c(i-3,i-2,i-1),'juros_imob_pf_tot_12meses'][[1]])
temp_ahead[i,'credit_pf_imob'] = mean(temp_ahead[c(i-3,i-2,i-1),'credit_pf_imob'][[1]])
temp_ahead[i,'massa_sp_mes_calc'] = mean(temp_ahead[c(i-3,i-2,i-1),'massa_sp_mes_calc'][[1]])
temp_ahead[i,'lancamentos_alvaras'] = mean(temp_ahead[c(i-3,i-2,i-1),'lancamentos_alvaras'][[1]])
}
temp_ahead <- temp_ahead[complete.cases(temp_ahead),]
test_ahead = temp_ahead[c( (nrow(temp_ahead)-11):nrow(temp_ahead) ),]
model.lag_train = ardlDlm(g2, data = temp
,p = max(df.lags[,2:ncol(df.lags)])-1
,q = df.lags$quant_imov_itbi-1
,remove=remove
)
summary(model.lag_train)
x.transp <- t(as.matrix(test_ahead[2:ncol(test_ahead)]))
step.ahead <- dim(test_ahead)[1]
gc()
best.model.fct <- forecast(model = model.lag_train
,x = x.transp
,h = step.ahead
,interval = TRUE
,level = 0.95
,nSim = 500)
best.model.fct
df = df_demanda[,c("Mes_Ano","quant_imov_itbi")]
df$quant_imov_itbi = log(df$quant_imov_itbi)
df$LB95 = NA
df$UB95 = NA
best.model.fct$forecasts$Mes_Ano = NA
names(best.model.fct$forecasts) = c('LB95','quant_imov_itbi','UB95','Mes_Ano')
df = rbind(df,best.model.fct$forecasts[,c('Mes_Ano','quant_imov_itbi','LB95','UB95')])
df$Mes_Ano = seq(as.Date("2019/01/01"), by = "month", length.out = nrow(df))
# for (i in c(1:nrow(df)) ) {
#   if (i!=nrow(df)) {
#     df$tx_itbi[i+1] = df$quant_imov_itbi[i+1]/df$quant_imov_itbi[i]-1
#   }
# }
fig <- plot_ly(x = df$Mes_Ano, y = df$LB95, type = 'scatter', mode = 'lines',
line = list(color = 'transparent'),
showlegend = FALSE, name = 'Mínimo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$UB95, type = 'scatter', mode = 'lines',
fill = 'tonexty', fillcolor='rgba(0,100,80,0.2)', line = list(color = 'transparent'),
showlegend = FALSE, name = 'Máximo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$quant_imov_itbi, type = 'scatter', mode = 'lines',
line = list(color='rgb(0,100,80)'),
name = 'Médio')
fig <- fig %>% layout(title = "Demanda de Imóveis em São Paulo (+12 meses) <sub>modelo misto</sub>",
paper_bgcolor='rgb(255,255,255)', plot_bgcolor='rgb(229,229,229)',
xaxis = list(title = "Ano Mês<br><sup>Fonte: RBA</sup>",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE),
yaxis = list(title = "",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE))
fig
saveWidget(fig, file = "~/GitHub/Dashes/demanda_imv_mod3_log.html")
df$quant_imov_itbi = exp(df$quant_imov_itbi)
df$LB95 = exp(df$LB95)
df$UB95 = exp(df$UB95)
fig <- plot_ly(x = df$Mes_Ano, y = df$LB95, type = 'scatter', mode = 'lines',
line = list(color = 'transparent'),
showlegend = FALSE, name = 'Mínimo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$UB95, type = 'scatter', mode = 'lines',
fill = 'tonexty', fillcolor='rgba(0,100,80,0.2)', line = list(color = 'transparent'),
showlegend = FALSE, name = 'Máximo')
fig <- fig %>% add_trace(x = df$Mes_Ano, y = df$quant_imov_itbi, type = 'scatter', mode = 'lines',
line = list(color='rgb(0,100,80)'),
name = 'Médio')
fig <- fig %>% layout(title = "Demanda de Imóveis em São Paulo (+12 meses) <sub>modelo misto</sub>",
paper_bgcolor='rgb(255,255,255)', plot_bgcolor='rgb(229,229,229)',
xaxis = list(title = "Ano Mês<br><sup>Fonte: RBA</sup>",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE),
yaxis = list(title = "",
gridcolor = 'rgb(255,255,255)',
showgrid = TRUE,
showline = FALSE,
showticklabels = TRUE,
tickcolor = 'rgb(127,127,127)',
ticks = 'outside',
zeroline = FALSE))
fig
saveWidget(fig, file = "~/GitHub/Dashes/demanda_imv_mod3.html")
